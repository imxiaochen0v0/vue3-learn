<script setup>
import { ref, watch } from 'vue';

const count = ref(0)
const nickName = ref('imxiaochen')
const changeCount = () => {
  count.value++
}
const changeNickName = () => {
  nickName.value = 'imxiaochen0v0'
}

// 1ã€ç›‘å¬å•ä¸ªæ•°æ®
/* watch(count, (newValue, oldValue) => {
  console.log("ğŸš€ ~ watch ~ oldValue:", oldValue);
  console.log("ğŸš€ ~ watch ~ newValue:", newValue);
}) */

// 2ã€ç›‘å¬å¤šä¸ªæ•°æ®
/* watch([count, nickName], (newValue, oldValue) => {
  console.log("ğŸš€ ~ watch ~ oldValue:", oldValue);
  console.log("ğŸš€ ~ watch ~ newValue:", newValue);
}) */

// 3ã€immediate ç«‹å³æ‰§è¡Œ
/* watch(count, (newValue, oldValue) => {
  console.log("ğŸš€ ~ watch ~ oldValue:", oldValue);
  console.log("ğŸš€ ~ watch ~ newValue:", newValue);
},{
  immediate: true
}) */

// 4ã€deepæ·±åº¦ç›‘å¬ é»˜è®¤ä¸ºæµ…å±‚ ç›‘å¬ä¸åˆ°å¤æ‚ç±»å‹
const userInfo = ref({
  name: 'imxiaochen',
  age: 18
})
const changeUserInfo = () => {
  userInfo.value.age++
  // userInfo.value.name = 'imxiaochen0v0'
}
/* watch(userInfo, (newValue, oldValue) => {
  console.log("ğŸš€ ~ watch ~ oldValue:", oldValue);
  console.log("ğŸš€ ~ watch ~ newValue:", newValue);
}, {
  deep: true
}) */

// 5ã€ç›‘å¬å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§(æ— éœ€å¼€å¯deepæ·±åº¦ç›‘å¬)
watch(() => userInfo.value.age, (newValue, oldValue) => {
  console.log("ğŸš€ ~ watch ~ oldValue:", oldValue);
  console.log("ğŸš€ ~ watch ~ newValue:", newValue);
})
</script>

<template>
  <div class=''>
    <div>{{ count }}</div>
    <button @click="changeCount">æ”¹æ•°å­—</button>
    <br><br>
    <div>{{ nickName }}</div>
    <button @click="changeNickName">æ”¹æ˜µç§°</button>
    <br><br>
    <div>----- deepæ·±åº¦ç›‘å¬ -----</div>
    <div>{{ userInfo }}</div>
    <button @click="changeUserInfo">ä¿®æ”¹userInfo</button>
  </div>
</template>

<style scoped></style>